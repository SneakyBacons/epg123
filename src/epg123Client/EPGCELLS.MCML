<Mcml xmlns="http://schemas.microsoft.com/2006/mcml" xmlns:comm="res://Microsoft.MediaCenter.Shell!Globals.mcml" xmlns:ctl="res://Microsoft.MediaCenter.Shell!Controls.mcml" xmlns:cor="assembly://MsCorLib/System" xmlns:anim="res://Microsoft.MediaCenter.Shell!EpgAnimations.mcml" xmlns:ecom="res://Microsoft.MediaCenter.Shell!EpgCommon.mcml" xmlns:table="res://Microsoft.MediaCenter.Shell!Table.mcml" xmlns:browse="res://Microsoft.MediaCenter.Shell!BrowsePage.mcml" xmlns:focus="res://Microsoft.MediaCenter.Shell!FocusAnimation.mcml" xmlns:video="assembly://ehshell/MediaCenter.Video" xmlns:shell="assembly://Microsoft.MediaCenter.Shell/Microsoft.MediaCenter.Shell" xmlns:draw="assembly://Microsoft.MediaCenter.UI/Microsoft.MediaCenter.UI.Drawing" xmlns:button="res://Microsoft.MediaCenter.Shell!Button.mcml" xmlns:text="assembly://MsCorLib/System.Text" xmlns:me="Me"> <UI Name="EpgTimeCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <Font Name="TimeFont" FontName="global://comm:RegularFontFace" FontSize="16"/> <Color Name="TimeColor" Color="color://comm:OffWhite"/> </Properties> <Locals> <video:EpgTimeCell Name="Cell" EpgTimeCell="null"/> <cor:String Name="TimeString" String="null"/> </Locals> <Rules> <Default Target="[Cell]" Value="[Model.Cell!video:EpgTimeCell]"/> <Binding Target="[TimeString]" Source="[Cell.Time]"> <Transformer> <DateTimeTransformer Format="ShortTime,ConvertUtcToLocal"/> </Transformer> <Actions> <Set Target="[Label.Content]" Value="[TimeString]"/> </Actions> </Binding> <Default Target="[Accessible.Role]" Value="ColumnHeader"/> <Default Target="[Accessible.Name]" Value="[TimeString]"/> </Rules> <Content> <Panel Layout="Form"> <Children> <Text Name="Label" Margins="14,0,5,0" Color="[TimeColor]" Font="[TimeFont]"> <LayoutInput> <FormLayoutInput Left="Parent,0" Bottom="Parent,1"/> </LayoutInput> </Text> </Children> </Panel> </Content> </UI> <UI Name="EpgChannelCellHost" BaseUI="table:BaseTableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <IntRangedValue Name="PanWidth" IntRangedValue="$Required"/> <BooleanChoice Name="InToss" BooleanChoice="$Required"/> <BooleanChoice Name="IsPanning" BooleanChoice="$Required"/> </Properties> <Rules> <Default Target="[Model.VisibleAreaItem]" Value="[ChannelCell]"/> </Rules> <Content> <Panel Name="ItemRoot" Layout="Form"> <Children> <me:EpgChannelCell Name="ChannelCell" Model="[Model]" Navigation="ContainAll" FocusArea="[FocusArea]" Area="[Area]" PanWidth="[PanWidth]" InToss="[InToss]" IsPanning="[IsPanning]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgChannelCell" BaseUI="me:EpgBodyCell"> <Properties> <Color Name="NumberDefaultColor" Color="color://comm:GuideMediumBlue"/> <Color Name="NumberExpandedColor" Color="color://comm:OffWhite"/> <Color Name="CallsignDefaultColor" Color="color://comm:OffWhite60Percent"/> <Color Name="CallsignExpandedColor" Color="color://comm:OffWhite"/> <Font Name="NumberDefaultFont" FontName="global://comm:RegularFontFace" FontSize="18"/> <Font Name="NumberExpandedFont" FontName="global://comm:MainFontFace" FontSize="22"/> <Font Name="CallsignDefaultFont" FontName="global://comm:RegularFontFace" FontSize="18"/> <Font Name="CallsignExpandedFont" FontName="global://comm:RegularFontFace" FontSize="18"/> <Inset Name="BackgroundDefaultPadding" Inset="10,12,10,8"/> <Inset Name="BackgroundExpandedPadding" Inset="10,6,10,6"/> <Inset Name="DefaultNumberMargins" Inset="0,0,0,0"/> <Inset Name="FocusNumberMargins" Inset="-3,2,0,0"/> <Inset Name="DefaultCallsignMargins" Inset="0,0,0,0"/> <Inset Name="FocusCallsignMargins" Inset="0,6,0,0"/> <video:EpgChannelCell Name="Cell" EpgChannelCell="null"/> <draw:BaseImage Name="PressedImage" BaseImage="res://ehres!Common.Button.PressedHighlight.png"/> </Properties> <Locals> <ShortcutHandler Name="PlayHandler" Shortcut="Play" Handle="true"> <Command> <InvokeCommand Target="[Cell.PlayLiveMedia]"/> </Command> </ShortcutHandler> <shell:ContextualUIDescription Name="ContextualUIDescription" Source="@res://Microsoft.MediaCenter.Shell!ContextMenu.mcml#ContextualGridButton"/> </Locals> <Rules> <Default Target="[Cell]" Value="[Model.Cell!video:EpgChannelCell]"/> <Default Target="[ModelCommand]" Value="[Model.Cell!video:EpgChannelCell]"/> <Default Target="[Accessible.Name]" Value="[Cell.AccessibilityInfo]"/> <Default Target="[Accessible.Role]" Value="RowHeader"/> <Default Target="[Accessible.DefaultActionCommand]" Value="[ModelCommand]"/> <Binding Target="[Accessible.IsFocused]" Source="[Input.DeepKeyFocus]"/> <Binding Target="[Accessible.IsSelected]" Source="[Model.ContainsFocusRow]"/> <Binding Target="[Accessible.IsFocusable]" Source="[Model.IsOnscreen]"/> <Binding Target="[Accessible.IsSelectable]" Source="[Model.IsOnscreen]"/> <Default Target="[Number.Content]" Value="[Cell.Number]"> <Transformer> <FormatTransformer/> </Transformer> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="SubText" value="[Number.Content]" ExclusiveApply="false"/> </Actions> </Default> <Default Target="[Callsign.Content]" Value="[Cell.Callsign]"> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="Text" value="[Cell.Callsign]" ExclusiveApply="false"/> </Actions> </Default> <Default Target="[SmallLogo.Content]" Value="[Cell.SmallLogo]"/> <Rule> <Conditions> <Equality Source="[Input.DeepKeyFocus]" Value="true"/> <Equality Source="[InToss.Value]" Value="false"/> <Equality Source="[IsPanning.Value]" Value="false"/> <Equality Source="[Area]" Value="RowHeader"/> </Conditions> <Actions> <Set Target="[FocusOverlay.Visible]" Value="true"/> <Set Target="[Callsign.Font]" Value="[CallsignExpandedFont]"/> <Set Target="[Callsign.Color]" Value="[CallsignExpandedColor]"/> <Set Target="[Number.Font]" Value="[NumberExpandedFont]"/> <Set Target="[Number.Color]" Value="[NumberExpandedColor]"/> <Set Target="[Background.Padding]" Value="[BackgroundExpandedPadding]"/> <Set Target="[Callsign.Margins]" Value="[FocusCallsignMargins]"/> <Set Target="[Number.Margins]" Value="[FocusNumberMargins]"/> <Set Target="[SmallLogo.MaximumSize]" Value="999,333"/> </Actions> </Rule> <Rule> <Conditions> <Equality Source="[SmallLogo.Content]" ConditionOp="NotEquals" Value="null"/> </Conditions> <Actions> <Set Target="[Callsign.Visible]" Value="false"/> </Actions> </Rule> <Binding Source="[Clicker.Clicking]" Target="[Highlight.Visible]"/> </Rules> <Content> <Graphic Name="Background" Content="image://ecom:Cell.Background.Dark" Margins="2,2,1,1" HorizontalAlignment="Fill" VerticalAlignment="Fill" Padding="[BackgroundDefaultPadding]" Layout="Form"> <Children> <Text Name="Number" Font="[NumberDefaultFont]" Color="[NumberDefaultColor]" Margins="[DefaultNumberMargins]" MaximumSize="75,0"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0"/> </LayoutInput> </Text> <Panel Name="SmallLogoPanel"> <LayoutInput> <FormLayoutInput Bottom="Number,1" Right="Parent,1"/> </LayoutInput> <Children> <ecom:ChannelLogo Name="SmallLogo" MaximumSize="70,40"/> </Children> </Panel> <Panel Name="CallsignPanel"> <LayoutInput> <FormLayoutInput Left="Number,1" Bottom="Number,1" Right="Parent,1" Horizontal="Far"/> </LayoutInput> <Children> <Text Name="Callsign" Font="[CallsignDefaultFont]" Color="[CallsignDefaultColor]" Margins="[DefaultCallsignMargins]" HorizontalAlignment="Near"/> </Children> </Panel> <Clip FadeSize="20" Layout="LegacyFill" Margins="-10,-10,-10,-10"> <Children> <Graphic Name="Highlight" Image="[PressedImage]"> <Animations> <IAnimationProvider IAnimationProvider="global://anim:PressedHighlight.Show"/> <IAnimationProvider IAnimationProvider="global://anim:PressedHighlight.Hide"/> </Animations> </Graphic> </Children> </Clip> <Graphic Name="FocusOverlay" Content="image://ecom:Cell.Focus" Visible="false" Margins="-10,-6,-10,-6" HorizontalAlignment="Fill" VerticalAlignment="Fill"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Right="Parent,1" Bottom="Parent,1"/> </LayoutInput> </Graphic> </Children> </Graphic> </Content> </UI> <UI Name="EpgBroadbandChannelCellHost" BaseUI="table:BaseTableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <IntRangedValue Name="PanWidth" IntRangedValue="$Required"/> <BooleanChoice Name="InToss" BooleanChoice="$Required"/> <BooleanChoice Name="IsPanning" BooleanChoice="$Required"/> </Properties> <Rules> <Default Target="[Model.VisibleAreaItem]" Value="[ChannelCell]"/> </Rules> <Content> <Panel Name="ItemRoot" Layout="Form"> <Children> <me:EpgBroadbandChannelCell Name="ChannelCell" Model="[Model]" Navigation="ContainAll" FocusArea="[FocusArea]" Area="[Area]" PanWidth="[PanWidth]" InToss="[InToss]" IsPanning="[IsPanning]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgBroadbandChannelCell" BaseUI="me:EpgBodyCell"> <Properties> <Color Name="LabelColor" Color="color://comm:OffWhite60Percent"/> <Color Name="LabelFocusColor" Color="color://comm:OffWhite"/> <Font Name="LabelFont" FontName="global://comm:RegularFontFace" FontSize="18"/> <Font Name="LabelFocusFont" FontName="global://comm:MainFontFace" FontSize="18"/> </Properties> <Locals> <video:EpgBroadbandChannelCell Name="Cell" EpgBroadbandChannelCell="[Model.Cell!video:EpgBroadbandChannelCell]"/> <shell:ContextualUIDescription Name="ContextualUIDescription" Source="@res://Microsoft.MediaCenter.Shell!ContextMenu.mcml#ContextualGridButton"/> </Locals> <Rules> <Default Target="[ModelCommand]" Value="[Model.Cell!video:EpgBroadbandChannelCell]"/> <Default Target="[Accessible.Name]" Value="[Cell.AccessibilityInfo]"/> <Default Target="[Accessible.Role]" Value="RowHeader"/> <Default Target="[Accessible.DefaultActionCommand]" Value="[ModelCommand]"/> <Binding Target="[Accessible.IsFocused]" Source="[Input.DeepKeyFocus]"/> <Binding Target="[Accessible.IsSelected]" Source="[Model.ContainsFocusRow]"/> <Binding Target="[Accessible.IsFocusable]" Source="[Model.IsOnscreen]"/> <Binding Target="[Accessible.IsSelectable]" Source="[Model.IsOnscreen]"/> <Default Target="[Label.Content]" Value="[Cell.Label]"> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="Text" value="[Label.Content]" ExclusiveApply="false"/> </Actions> </Default> <Default Target="[Logo.Content]" Value="[Cell.SmallLogo]"/> <Rule> <Conditions> <Equality Source="[Input.DeepKeyFocus]" Value="true"/> <Equality Source="[InToss.Value]" Value="false"/> <Equality Source="[IsPanning.Value]" Value="false"/> <Equality Source="[Area]" Value="RowHeader"/> </Conditions> <Actions> <Set Target="[FocusOverlay.Visible]" Value="true"/> <Set Target="[Label.Font]" Value="[LabelFocusFont]"/> <Set Target="[Label.Color]" Value="[LabelFocusColor]"/> </Actions> </Rule> </Rules> <Content> <Graphic Name="Background" Content="image://ecom:Cell.Background.Dark" Margins="2,2,1,1" HorizontalAlignment="Fill" VerticalAlignment="Fill" Layout="Form"> <Children> <Panel Name="ContentPanel" Layout="Dock"> <LayoutInput> <FormLayoutInput Left="Parent,0,7" Right="Parent,1,-7"/> </LayoutInput> <Children> <ecom:ChannelLogo Name="Logo" MaximumSize="74,42" Margins="0,0,7,0"> <LayoutInput> <DockLayoutInput Alignment="Center" Position="Left"/> </LayoutInput> </ecom:ChannelLogo> <Panel> <LayoutInput> <DockLayoutInput Alignment="Center" Position="Right"/> </LayoutInput> <Children> <Text Name="Label" Font="[LabelFont]" Color="[LabelColor]" HorizontalAlignment="Near"/> </Children> </Panel> </Children> </Panel> <Graphic Name="FocusOverlay" Content="image://ecom:Cell.Focus" Visible="false" HorizontalAlignment="Fill" VerticalAlignment="Fill"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Right="Parent,1" Bottom="Parent,1"/> </LayoutInput> </Graphic> </Children> </Graphic> </Content> </UI> <UI Name="EpgPairedChannelCellHost" BaseUI="table:BaseTableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <IntRangedValue Name="PanWidth" IntRangedValue="$Required"/> <BooleanChoice Name="InToss" BooleanChoice="$Required"/> <BooleanChoice Name="IsPanning" BooleanChoice="$Required"/> </Properties> <Rules> <Default Target="[Model.VisibleAreaItem]" Value="[ChannelCell]"/> </Rules> <Content> <Panel Name="ItemRoot" Layout="Form"> <Children> <me:EpgPairedChannelCell Name="ChannelCell" Model="[Model]" Navigation="ContainAll" FocusArea="[FocusArea]" Area="[Area]" PanWidth="[PanWidth]" InToss="[InToss]" IsPanning="[IsPanning]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgPairedChannelCell" BaseUI="me:EpgBodyCell"> <Properties> <Color Name="LabelColor" Color="color://comm:GuideMediumBlue"/> <Color Name="LabelFocusColor" Color="color://comm:OffWhite"/> <Font Name="LabelFont" FontName="global://comm:RegularFontFace" FontSize="18"/> <Font Name="LabelFocusFont" FontName="global://comm:MainFontFace" FontSize="18"/> <Color Name="CallsignColor" Color="color://comm:OffWhite60Percent"/> <Color Name="CallsignFocusColor" Color="color://comm:OffWhite"/> </Properties> <Locals> <video:EpgPairedChannelCell Name="Cell" EpgPairedChannelCell="[Model.Cell!video:EpgPairedChannelCell]"/> <shell:ContextualUIDescription Name="ContextualUIDescription" Source="@res://Microsoft.MediaCenter.Shell!ContextMenu.mcml#ContextualGridButton"/> <FormLayoutInput Name="ContentPanelLayout" Top="Parent,0" Bottom="Parent,1" Left="Parent,0,7" Right="Parent,1,-7"/> </Locals> <Rules> <Default Target="[ModelCommand]" Value="[Model.Cell!video:EpgPairedChannelCell]"/> <Default Target="[Accessible.Name]" Value="[Cell.AccessibilityInfo]"/> <Default Target="[Accessible.Role]" Value="RowHeader"/> <Default Target="[Accessible.DefaultActionCommand]" Value="[ModelCommand]"/> <Binding Target="[Accessible.IsFocused]" Source="[Input.DeepKeyFocus]"/> <Binding Target="[Accessible.IsSelected]" Source="[Model.ContainsFocusRow]"/> <Binding Target="[Accessible.IsFocusable]" Source="[Model.IsOnscreen]"/> <Binding Target="[Accessible.IsSelectable]" Source="[Model.IsOnscreen]"/> <Default Target="[Number.Content]" Value="[Cell.Number]"> <Transformer> <FormatTransformer/> </Transformer> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="SubText" value="[Number.Content]" ExclusiveApply="false"/> </Actions> </Default> <Default Target="[Callsign.Content]" Value="[Cell.Callsign]"> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="Text" value="[Cell.Callsign]" ExclusiveApply="false"/> </Actions> </Default> <Default Target="[Logo.Content]" Value="[Cell.SmallLogo]"/> <Default Target="[Label.Content]" Value="[Cell.Label]"/> <Rule> <Conditions> <Equality Source="[Input.DeepKeyFocus]" Value="true"/> <Equality Source="[InToss.Value]" Value="false"/> <Equality Source="[IsPanning.Value]" Value="false"/> <Equality Source="[Area]" Value="RowHeader"/> </Conditions> <Actions> <Set Target="[FocusOverlay.Visible]" Value="true"/> <Set Target="[Label.Font]" Value="[LabelFocusFont]"/> <Set Target="[Label.Color]" Value="[LabelFocusColor]"/> <Set Target="[Number.Font]" Value="[LabelFocusFont]"/> <Set Target="[Number.Color]" Value="[LabelFocusColor]"/> <Set Target="[Callsign.Color]" Value="[CallsignFocusColor]"/> </Actions> </Rule> <Condition Source="[Model.VisibleRowSpan]" SourceValue="1"> <Conditions> <Equality Source="[Model.StartRow]" ConditionOp="LessThan" Value="[Model.FirstVisibleRow]"/> </Conditions> <Actions> <Set Target="[Number.Visible]" Value="false"/> <Set Target="[CallsignPanel.Visible]" Value="false"/> <Set Target="[ContentPanelLayout.Top.Percent]" Value="0"/> </Actions> </Condition> <Default Target="[ContentPanelLayout.Top.Percent]" Value="0.5"/> <Condition Source="[Model.VisibleRowSpan]" SourceValue="1"> <Conditions> <Equality Source="[Model.EndRow]" ConditionOp="GreaterThan" Value="[Model.LastVisibleRow]"/> </Conditions> <Actions> <Set Target="[ContentPanel.Visible]" Value="false"/> </Actions> </Condition> </Rules> <Content> <Graphic Name="Background" Content="image://ecom:Cell.Background.Dark" Margins="2,2,1,1" HorizontalAlignment="Fill" VerticalAlignment="Fill" Layout="Form"> <Children> <Text Name="Number" Font="[LabelFont]" Color="[LabelColor]" MaximumSize="75,0" Margins="0,0,10,0" Visible="true"> <LayoutInput> <FormLayoutInput Left="Parent,0,10" Top="Parent,0,12"/> </LayoutInput> </Text> <Panel Name="CallsignPanel" Visible="true"> <LayoutInput> <FormLayoutInput Left="Number,1" Top="Number,0" Right="Parent,1,-10" Horizontal="Far"/> </LayoutInput> <Children> <Text Name="Callsign" Font="[LabelFont]" Color="[CallsignColor]" HorizontalAlignment="Near"/> </Children> </Panel> <Panel Name="ContentPanel" Layout="Dock" LayoutInput="[ContentPanelLayout]" Visible="true"> <Children> <ecom:ChannelLogo Name="Logo" MaximumSize="74,47" Margins="0,0,7,0"> <LayoutInput> <DockLayoutInput Alignment="Center" Position="Left"/> </LayoutInput> </ecom:ChannelLogo> <Panel> <LayoutInput> <DockLayoutInput Alignment="Center" Position="Right"/> </LayoutInput> <Children> <Text Name="Label" Font="[LabelFont]" Color="[CallsignColor]" HorizontalAlignment="Near"/> </Children> </Panel> </Children> </Panel> <Graphic Name="FocusOverlay" Content="image://ecom:Cell.Focus" Visible="false" HorizontalAlignment="Fill" VerticalAlignment="Fill"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Right="Parent,1" Bottom="Parent,1"/> </LayoutInput> </Graphic> </Children> </Graphic> </Content> </UI> <UI Name="EpgSubChannelCellHost" BaseUI="table:BaseTableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <IntRangedValue Name="PanWidth" IntRangedValue="$Required"/> <BooleanChoice Name="InToss" BooleanChoice="$Required"/> <BooleanChoice Name="IsPanning" BooleanChoice="$Required"/> </Properties> <Rules> <Default Target="[Model.VisibleAreaItem]" Value="[ChannelCell]"/> </Rules> <Content> <Panel Name="ItemRoot" Layout="Form"> <Children> <me:EpgSubChannelCell Name="ChannelCell" Model="[Model]" Navigation="ContainAll" FocusArea="[FocusArea]" Area="[Area]" PanWidth="[PanWidth]" InToss="[InToss]" IsPanning="[IsPanning]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgSubChannelCell" BaseUI="me:EpgChannelCell"> <Locals> <video:EpgSubChannelCell Name="SubCell" EpgSubChannelCell="null"/> <FormLayoutInput Name="CallsignLayoutInput" Bottom="Parent,1,-10" Right="Parent,1"/> <IntRangedValue Name="FocusIndex"/> <Inset Name="BackgroundDefaultPadding" Inset="0,0,0,0"/> <Inset Name="BackgroundExpandedPadding" Inset="0,0,0,0"/> <Inset Name="DefaultNumberMargins" Inset="0,0,0,0"/> <Inset Name="FocusNumberMargins" Inset="0,-2,0,0"/> <Inset Name="DefaultCallsignMargins" Inset="0,0,0,0"/> <Inset Name="FocusCallsignMargins" Inset="0,0,0,0"/> </Locals> <Rules> <Default Target="[SubCell]" Value="[Model.Cell!video:EpgSubChannelCell]"/> <Default Target="[Number.Content]" Value="[SubCell.OneTouchNumber]"> <Transformer> <FormatTransformer/> </Transformer> <Conditions> <Equality Source="[SubCell.OneTouchNumber]" ConditionOp="GreaterThan" Value="0"/> </Conditions> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="SubText" value="[Number.Content]" ExclusiveApply="false"/> </Actions> </Default> <Default Target="[Number.Content]" Value=""> <Conditions> <Equality Source="[SubCell.OneTouchNumber]" ConditionOp="LessThanOrEquals" Value="0"/> </Conditions> </Default> <Default Target="[SubChannels.Source]" Value="[SubCell.SubChannels]"/> <Binding Target="[FocusIndex.Value]" Source="[Model.FocusRowIndex]"/> <Rule> <Conditions> <Equality Source="[Model.ContainsFocusRow]" Value="true"/> <Equality Source="[FocusArea.Value]" ConditionOp="NotEquals" Value="OutsideTable"/> </Conditions> <Actions> <Set Target="[SubChannels.Visible]" Value="true"/> <Set Target="[CallsignLayoutInput.Right.Offset]" Value="-60"/> </Actions> </Rule> <Default Target="[CallsignLayoutInput.Right.Offset]" Value="-10"/> <Rule> <Conditions> <Equality Source="[Model.VisibleRowSpan]" Value="1"/> </Conditions> <Actions> <Set Target="[CallsignLayoutInput.Left]" Value="Number,1,4"/> </Actions> </Rule> <Default Target="[CallsignLayoutInput.Left]" Value="Parent,0,10"/> </Rules> <Content> <Graphic Name="Background" Content="image://ecom:Cell.Background.Dark" Margins="2,2,2,2" HorizontalAlignment="Fill" VerticalAlignment="Fill" Padding="[BackgroundDefaultPadding]" Layout="Form"> <Children> <Repeater Name="SubChannels" Visible="false" Layout="Fill"> <Content> <me:SubChannelNumber Model="[Model]" ChannelNumber="[RepeatedItem!cor:String]" SelectedIndex="[FocusIndex]" MyIndex="[RepeatedItemIndex.Value]" NumberColor="[CallsignExpandedColor]" NumberFont="[CallsignExpandedFont]"/> </Content> </Repeater> <Text Name="Number" Font="[NumberDefaultFont]" Color="[NumberDefaultColor]" MaximumSize="40,0"> <LayoutInput> <FormLayoutInput Top="Parent,0,10" Left="Parent,0,10"/> </LayoutInput> </Text> <Panel Name="CallsignPanel" LayoutInput="[CallsignLayoutInput]"> <Children> <Text Name="Callsign" Font="[CallsignDefaultFont]" Color="[CallsignDefaultColor]" HorizontalAlignment="Near"/> </Children> </Panel> <Panel Name="SmallLogoPanel" Visible="true" Layout="Center"> <LayoutInput> <FormLayoutInput Bottom="Parent,1,-6" Top="Parent,1,-46" Right="Parent,1,-60" Left="Parent,0,50"/> </LayoutInput> <Children> <ecom:ChannelLogo Name="SmallLogo" MaximumSize="70,40"/> </Children> </Panel> <Clip FadeSize="20" Layout="LegacyFill" Margins="-10,-10,-10,-10"> <Children> <Graphic Name="Highlight" Image="[PressedImage]"> <Animations> <IAnimationProvider IAnimationProvider="global://anim:PressedHighlight.Show"/> <IAnimationProvider IAnimationProvider="global://anim:PressedHighlight.Hide"/> </Animations> </Graphic> </Children> </Clip> <Graphic Name="FocusOverlay" Content="image://ecom:Cell.Focus" Visible="false" HorizontalAlignment="Fill" VerticalAlignment="Fill"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Right="Parent,1" Bottom="Parent,1"/> </LayoutInput> </Graphic> </Children> </Graphic> </Content> </UI> <UI Name="SubChannelNumber"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <cor:String Name="ChannelNumber" String="$Required"/> <IntRangedValue Name="SelectedIndex" IntRangedValue="$Required"/> <cor:Int32 Name="MyIndex" Int32="-1"/> <Color Name="NumberColor"/> <Font Name="NumberFont"/> </Properties> <Rules> <Changed Source="[SelectedIndex.Value]" InitialEvaluate="true"> <Conditions> <Equality Source="[SelectedIndex.Value]" ConditionOp="NotEquals" Value="-1"/> </Conditions> <Actions> <Invoke Target="[Model.GetLayoutInputForSelectedIndex]" index="[MyIndex]" ResultTarget="[Number.LayoutInput]"/> </Actions> </Changed> </Rules> <Content> <Panel Layout="Form"> <Children> <Text Name="Number" Content="[ChannelNumber]" Font="[NumberFont]" Color="[NumberColor]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgBodyCell" BaseUI="table:TableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <Command Name="ModelCommand" Command="null"/> </Properties> <Locals> <ClickHandler Name="Clicker"/> <cor:Boolean Name="IsSelectable" Boolean="false"/> <Timer Name="IsSelectableTimer" Interval="50" AutoRepeat="false" Enabled="false"/> </Locals> <Rules> <Default Target="[Input.CreateInterestTarget]" Value="Background"/> <Rule> <Conditions> <Equality Source="[Input.KeyFocus]" Value="true" ConditionOp="ChangedTo"/> </Conditions> <Actions> <Set Target="[IsSelectable]" Value="false"/> <Invoke Target="[IsSelectableTimer.Start]"/> <PlaySound Sound="res://ehres!Focus_a.wav"/> </Actions> </Rule> <Rule> <Conditions> <Modified Source="[IsSelectableTimer.Tick]"/> </Conditions> <Actions> <Set Target="[IsSelectable]" Value="true"/> </Actions> </Rule> <Condition Source="[Input.KeyFocus]" ConditionOp="ChangedTo" SourceValue="false"> <Actions> <Set Target="[IsSelectable]" Value="false"/> </Actions> </Condition> <Rule> <Conditions> <Modified Source="[Clicker.Invoked]"/> <Equality Source="[ModelCommand]" Value="null" ConditionOp="NotEquals"/> <Equality Source="[IsSelectable]" Value="true"/> </Conditions> <Actions> <PlaySound Sound="res://ehres!Select_a.wav"/> <Invoke Target="[ModelCommand.Invoke]" InvokePolicy="AsynchronousLowPri"/> </Actions> </Rule> </Rules> <Content> <Panel Name="Background" Layout="Form"> <Children> <Graphic Name="BackgroundGraphic" Content="image://ecom:Cell.Background" MouseInteractive="true" Margins="2,2,2,2" HorizontalAlignment="Fill" VerticalAlignment="Fill" Padding="10,6,10,2" Layout="Form" Alpha="0.65"/> </Children> </Panel> </Content> </UI> <UI Name="EpgShowCellHost" BaseUI="table:BaseTableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <IntRangedValue Name="PanWidth" IntRangedValue="$Required"/> <BooleanChoice Name="InToss" BooleanChoice="$Required"/> <BooleanChoice Name="IsPanning" BooleanChoice="$Required"/> </Properties> <Rules> <Default Target="[Model.VisibleAreaItem]" Value="[ShowCell]"/> <Rule> <Conditions> <Equality Source="[FocusArea.Value]" Value="TurboScroll"/> </Conditions> <Actions> <Set Target="[ItemRoot.Alpha]" Value="0.25"/> </Actions> </Rule> </Rules> <Content> <Panel Name="ItemRoot" Layout="Form" Alpha="1"> <Children> <me:EpgShowCell Name="ShowCell" Model="[Model]" Navigation="ContainAll" FocusArea="[FocusArea]" Area="[Area]" PanWidth="[PanWidth]" InToss="[InToss]" IsPanning="[IsPanning]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgShowCell" BaseUI="me:EpgBodyCell"> <Properties> <Color Name="TitleColor" Color="color://comm:GuideWhite"/> <Color Name="TitleFocusColor" Color="color://comm:OffWhite"/> <Font Name="TitleDefaultFont" FontName="global://comm:RegularFontFace" FontSize="22"/> <Font Name="TitleFocusFont" FontName="global://comm:MainFontFace" FontSize="22"/> <cor:Single Name="DefaultAlpha" Single="1.0"/> <cor:Single Name="FilteredAlpha" Single="0.65"/> <cor:Single Name="HDIconFocusAlpha" Single="1.0"/> <cor:Single Name="HDIconNonFocusAlpha" Single="0.5"/> <video:EpgShowCell Name="Cell" EpgShowCell="null"/> <draw:BaseImage Name="PressedImage" BaseImage="res://ehres!Common.Button.PressedHighlight.png"/> </Properties> <Locals> <BooleanChoice Name="FocusedState"/> <ShortcutHandler Name="RecordHandler" Shortcut="Record" Handle="true"/> <ShortcutHandler Name="PlayHandler" Shortcut="Play" Handle="true"> <Command> <InvokeCommand Target="[Cell.WatchLive]"/> </Command> </ShortcutHandler> <shell:ContextualUIDescription Name="ContextualUIDescription" Source="@res://Microsoft.MediaCenter.Shell!ContextMenu.mcml#ContextualGridButton"/> <text:StringBuilder Name="StringBuilder"/> <cor:String Name="myString" String=""/> </Locals> <Rules> <Default Target="[Cell]" Value="[Model.Cell!video:EpgShowCell]"/> <Default Target="[ModelCommand]" Value="[Model.Cell!video:EpgShowCell.Command]"/> <Default Target="[Accessible.Name]" Value="[Cell.AccessibilityInfo]"/> <Default Target="[Accessible.Role]" Value="Cell"/> <Default Target="[Accessible.DefaultActionCommand]" Value="[ModelCommand]"/> <Binding Target="[Accessible.IsFocused]" Source="[Input.DeepKeyFocus]"/> <Binding Target="[Accessible.IsSelected]" Source="[Model.ContainsFocusRow]"/> <Binding Target="[Accessible.IsFocusable]" Source="[Model.IsOnscreen]"/> <Binding Target="[Accessible.IsSelectable]" Source="[Model.IsOnscreen]"/> <Default Target="[myString]" Value="[Cell.Title]"/> <Rule ConditionLogicalOp="And"> <Conditions> <Equality Source="[myString]" ConditionOp="Equals" Value="[Cell.Title]"/> <Equality Source="[Cell.Episode]" ConditionOp="NotEquals" Value="[Cell.Episode]"/> <Equality Source="[Cell.Episode]" ConditionOp="NotEquals" Value="[Cell.Title]"/> </Conditions> <Actions> <Invoke Target="[StringBuilder.Append]" value="[Cell.Title]" ExclusiveApply="false"/> <Invoke Target="[StringBuilder.Append]" value=" - " ExclusiveApply="false"/> <Invoke Target="[StringBuilder.Append]" value="[Cell.Episode]" ExclusiveApply="false"/> <Invoke Target="[StringBuilder.ToString]" ResultTarget="[myString]" ExclusiveApply="false"/> </Actions> </Rule> <Rule ConditionLogicalOp="And"> <Conditions> <Equality Source="[myString]" ConditionOp="Equals" Value="[Cell.Title]"/> <Equality Source="[Cell.MovieYear]" ConditionOp="NotEquals" Value="[Cell.MovieYear]"/> </Conditions> <Actions> <Invoke Target="[StringBuilder.Append]" value="[Cell.Title]" ExclusiveApply="false"/> <Invoke Target="[StringBuilder.Append]" value=" (" ExclusiveApply="false"/> <Invoke Target="[StringBuilder.Append]" value="[Cell.MovieYear]" ExclusiveApply="false"/> <Invoke Target="[StringBuilder.Append]" value=")" ExclusiveApply="false"/> <Invoke Target="[StringBuilder.ToString]" ResultTarget="[myString]" ExclusiveApply="false"/> </Actions> </Rule> <Binding Target="[Title.Content]" Source="[myString]"> <Actions> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="Text" value="[Cell.Title]"/> </Actions> </Binding> <Binding Target="[Background.Content]" Source="[Cell.BackgroundImage]"> <Conditions> <Equality Source="[Cell.BackgroundImage]" ConditionOp="NotEquals" Value="null"/> <Equality Source="[Cell.FocusImage]" ConditionOp="NotEquals" Value="null"/> <Equality Source="[Cell.MatchesFilter]" Value="true"/> </Conditions> <Actions> <Set Target="[FocusOverlay.Content]" Value="[Cell.FocusImage]"/> </Actions> </Binding> <Condition Source="[Cell.IsLiveNow]" SourceValue="true"> <Actions> <Set Target="[Title.Color]" Value="[TitleFocusColor]"/> </Actions> </Condition> <Rule> <Conditions> <Equality Source="[Cell.IsLiveNow]" Value="true"/> <Equality Source="[Cell.MatchesFilter]" Value="true"/> <Equality Source="[Area]" Value="TableBody"/> </Conditions> <Actions> <Set Target="[OnNowShadow.Visible]" Value="true"/> </Actions> </Rule> <Binding Source="[Cell.MatchesFilter]" Target="[TitleLine.Visible]"/> <Condition Source="[Cell.MatchesFilter]" ConditionOp="ChangedTo" SourceValue="false"> <Actions> <Set Target="[Background.Alpha]" Value="[FilteredAlpha]"/> </Actions> </Condition> <Condition Source="[Cell.MatchesFilter]" ConditionOp="ChangedTo" SourceValue="true"> <Actions> <Set Target="[Background.Alpha]" Value="[DefaultAlpha]"/> </Actions> </Condition> <Rule> <Conditions> <Equality Source="[Input.DeepKeyFocus]" Value="true"/> <Equality Source="[InToss.Value]" Value="false"/> <Equality Source="[IsPanning.Value]" Value="false"/> <Equality Source="[FocusArea.Value]" ConditionOp="NotEquals" Value="TurboScroll"/> <Equality Source="[Area]" Value="TableBody"/> </Conditions> <Actions> <Set Target="[FocusedState.Value]" Value="true"/> </Actions> </Rule> <Default Target="[FocusedState.Value]" Value="false"/> <Condition Source="[FocusedState.Value]" SourceValue="true"> <Actions> <Set Target="[FocusOverlay.Visible]" Value="true"/> <Set Target="[Title.Font]" Value="[TitleFocusFont]"/> <Set Target="[HDImage.Alpha]" Value="[HDIconFocusAlpha]"/> <Set Target="[Title.Color]" Value="[TitleFocusColor]"/> </Actions> </Condition> <Rule> <Conditions> <Equality Source="[Model.FirstVisibleColumn]" ConditionOp="GreaterThan" Value="[Model.StartColumn]"/> <Equality Source="[Model.IsOnscreen]" Value="true"/> </Conditions> <Actions> <Set Target="[ContinuingPrevious.Visible]" Value="true"/> </Actions> </Rule> <Default Target="[ContinuingPrevious.Visible]" Value="false"/> <Default Target="[ContinuingPrevious.Content]" Value="image://ecom:Continuing.Previous"/> <Rule> <Conditions> <Equality Source="[Model.LastVisibleColumn]" ConditionOp="LessThan" Value="[Model.EndColumn]"/> <Equality Source="[Model.IsOnscreen]" Value="true"/> </Conditions> <Actions> <Set Target="[ContinuingNext.Visible]" Value="true"/> </Actions> </Rule> <Default Target="[ContinuingNext.Visible]" Value="false"/> <Default Target="[ContinuingNext.Content]" Value="image://ecom:Continuing.Next"/> <Binding Source="[Cell.RecordGlyph]" Target="[Record.Image]"/> <Changed Source="[Record.Image]"> <Conditions> <IsValid Source="[Record.Image.Size]"/> </Conditions> <Actions> <Set Target="[Record.MinimumSize]" Value="[Record.Image.Size]"/> </Actions> </Changed> <Rule> <Conditions> <Equality Source="[Cell.ShouldShowHdIconInCell]" Value="true"/> <Equality Source="[Record.Image]" Value="null"/> <IsValid Source="[Cell.ScheduleEntry.IsHdtv]"/> <Equality Source="[Cell.ScheduleEntry.IsHdtv]" Value="true"/> </Conditions> <Actions> <Set Target="[HDImage.Visible]" Value="true"/> </Actions> </Rule> <Changed Source="[RecordHandler.Invoked]"> <Actions> <PlaySound Sound="res://ehres!RecordingStarted_a.wav"/> <Invoke Target="[Cell.Record]"/> </Actions> </Changed> <Binding Source="[Clicker.Clicking]" Target="[Highlight.Visible]"/> </Rules> <Content> <Graphic Name="Background" Content="image://ecom:Cell.Background" MouseInteractive="true" Margins="2,2,1,1" Alpha="[DefaultAlpha]" HorizontalAlignment="Fill" VerticalAlignment="Fill" Layout="Form" CenterPointPercent="0.5,0.5,0.5"> <Children> <Panel Name="TitleLine" Layout="Dock" Padding="10,8,10,0"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Right="Parent,1" Bottom="Parent,1"/> </LayoutInput> <Children> <Text Name="Title" Color="[TitleColor]" Font="[TitleDefaultFont]"> <LayoutInput> <DockLayoutInput Position="Client"/> </LayoutInput> </Text> <Graphic Name="ContinuingPrevious" Content="image://ecom:Continuing.Previous" Margins="0,1,9,8" MinimumSize="14,19"> <LayoutInput> <DockLayoutInput Position="Left" Alignment="Center"/> </LayoutInput> </Graphic> <Graphic Name="ContinuingNext" Content="image://ecom:Continuing.Next" Margins="9,1,0,8" MinimumSize="14,19"> <LayoutInput> <DockLayoutInput Position="Right" Alignment="Center"/> </LayoutInput> </Graphic> <Graphic Name="Record" Margins="0,6,0,8" MinimumSize="0,0"> <LayoutInput> <DockLayoutInput Position="Right" Alignment="Center"/> </LayoutInput> </Graphic> <Graphic Name="HDImage" Margins="0,6,0,8" Alpha="[HDIconNonFocusAlpha]" Content="res://ehres!MetaData.HDTV.png" Visible="false" MinimumSize="27,17"> <LayoutInput> <DockLayoutInput Position="Right" Alignment="Center"/> </LayoutInput> </Graphic> </Children> </Panel> <Clip FadeSize="20" Layout="LegacyFill"> <Children> <Graphic Name="Highlight" Image="[PressedImage]"> <Animations> <IAnimationProvider IAnimationProvider="global://anim:PressedHighlight.Show"/> <IAnimationProvider IAnimationProvider="global://anim:PressedHighlight.Hide"/> </Animations> </Graphic> </Children> </Clip> <Graphic Name="OnNowShadow" Content="image://ecom:Cell.OnNow.Shadow" Visible="false"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Bottom="Parent,1"/> </LayoutInput> </Graphic> <Graphic Name="FocusOverlay" Content="image://ecom:Cell.Focus" Visible="false" HorizontalAlignment="Fill" VerticalAlignment="Fill"> <LayoutInput> <FormLayoutInput Left="Parent,0" Top="Parent,0" Right="Parent,1" Bottom="Parent,1"/> </LayoutInput> </Graphic> </Children> </Graphic> </Content> </UI> <UI Name="EpgBroadbandCellHost" BaseUI="table:BaseTableCell"> <Properties> <shell:TableListItem Name="Model" TableListItem="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <IntRangedValue Name="PanWidth" IntRangedValue="$Required"/> <BooleanChoice Name="InToss" BooleanChoice="$Required"/> <BooleanChoice Name="IsPanning" BooleanChoice="$Required"/> </Properties> <Rules> <Default Target="[Model.VisibleAreaItem]" Value="[BroadbandCell]"/> <Rule> <Conditions> <Equality Source="[FocusArea.Value]" Value="TurboScroll"/> </Conditions> <Actions> <Set Target="[ItemRoot.Alpha]" Value="0"/> </Actions> </Rule> </Rules> <Content> <Panel Name="ItemRoot" Layout="Form" Alpha="1"> <Children> <me:EpgBroadbandCell Name="BroadbandCell" Model="[Model]" Navigation="Row, ContainHorizontal" FocusArea="[FocusArea]" Area="[Area]" PanWidth="[PanWidth]" InToss="[InToss]" IsPanning="[IsPanning]"/> </Children> </Panel> </Content> </UI> <UI Name="EpgBroadbandCell" BaseUI="me:EpgBodyCell"> <Locals> <video:EpgBroadbandCell Name="Cell" EpgBroadbandCell="[Model.Cell!video:EpgBroadbandCell]"/> <IntRangedValue Name="SelectionIndex"/> <IntRangedValue Name="SelectionIndex2" Value="0"/> <ScrollingHandler Name="ScrollingHandler" HandlerStage="Bubbled" HandlePageKeys="false" HandlePageCommands="false" HandleHomeEndKeys="false" HandleMouseWheel="false"/> <ScrollingData Name="ScrollingData"/> <Command Name="ScrollLeft"/> <Command Name="ScrollRight"/> <BooleanChoice Name="IsPanning"/> </Locals> <Rules> <Default Target="[Thumbnails.Source]" Value="[Cell.Thumbnails]"/> <Default Target="[ScrollingHandler.ScrollingData]" Value="[ScrollingData]"/> <Default Target="[ScrollingData.Repeater]" Value="[Thumbnails]"/> <Changed Source="[ScrollLeft.Invoked]"> <Actions> <Invoke Target="[ScrollingData.ScrollUp]"/> </Actions> </Changed> <Changed Source="[ScrollRight.Invoked]"> <Actions> <Invoke Target="[ScrollingData.ScrollDown]"/> </Actions> </Changed> <Binding Target="[ScrollLeftRegion.Visible]" Source="[Input.DeepKeyFocus]"/> <Binding Target="[ScrollRightRegion.Visible]" Source="[Input.DeepKeyFocus]"/> <Binding Source="[ScrollingData.CanScrollUp]" Target="[Scroller.ShowNear]"/> <Binding Source="[ScrollingData.CanScrollDown]" Target="[Scroller.ShowFar]"/> <Condition Source="[Input.DeepKeyFocus]" ConditionOp="ChangedTo" SourceValue="true"> <Actions> <Set Target="[SelectionIndex2.Value]" Value="[Model.TableFocusColumn]"> <Transformer> <MathTransformer DivideInt="11"/> </Transformer> </Set> </Actions> </Condition> <Condition Source="[SelectionIndex2.Value]" ConditionOp="GreaterThanOrEquals" SourceValue="[Cell.Thumbnails.Count]"> <Actions> <Set Target="[SelectionIndex2.Value]" Value="[Cell.Thumbnails.Count]"> <Transformer> <MathTransformer SubtractInt="1"/> </Transformer> </Set> </Actions> </Condition> <Changed Source="[SelectionIndex2.Value]"> <Actions> <Invoke Target="[Thumbnails.NavigateIntoIndex]" index="[SelectionIndex2.Value]"/> </Actions> </Changed> <Default Target="[Input.KeyFocusOnMouseEnter]" Value="false"/> <Binding Target="[Thumbnails.Visible]" Source="[Model.IsOnscreen]"/> <Binding Source="[SelectionIndex.Value]" Target="[Model.Cell!video:EpgBroadbandCell.SelectionIndex]"> <Actions> <Invoke Target="[Model.OnFocusChanged]" focus="[Input.DeepKeyFocus]"/> </Actions> </Binding> <Condition Source="[Input.DeepKeyFocus]" SourceValue="true"> <Conditions> <Equality Source="[ScrollingHandler.IsPanning]" Value="false"/> </Conditions> <Actions> <Set Target="[Border.Visible]" Value="true"/> <Set Target="[Shadow.Visible]" Value="true"/> </Actions> </Condition> <Binding Target="[IsPanning.Value]" Source="[ScrollingHandler.IsPanning]"/> </Rules> <Content> <Graphic Name="Background" Content="image://ecom:Cell.Background" Margins="2,2,1,1" HorizontalAlignment="Fill" VerticalAlignment="Fill" Layout="Form" CenterPointPercent="0.5,0.5,0.5"> <Children> <me:GuideAutoScrollRegion Name="ScrollLeftRegion" ScrollData="[ScrollingData]" ScrollCommand="[ScrollLeft]" LayoutPosition="Left" MaximumSize="51,0" RestModeEnabled="true"> <LayoutInput> <AnchorLayoutInput Left="Scroller,0" Top="Parent,0" Bottom="Parent,1"/> </LayoutInput> </me:GuideAutoScrollRegion> <me:GuideAutoScrollRegion Name="ScrollRightRegion" ScrollData="[ScrollingData]" ScrollCommand="[ScrollRight]" LayoutPosition="Right" MaximumSize="51,0" RestModeEnabled="true"> <LayoutInput> <AnchorLayoutInput Right="Scroller,1" Top="Parent,0" Bottom="Parent,1"/> </LayoutInput> </me:GuideAutoScrollRegion> <Graphic Name="Border" Visible="false" Image="image://ecom:Cell.Focus.Border" HorizontalAlignment="Fill" VerticalAlignment="Fill" SizingPolicy="SizeToConstraint" CenterPointPercent="0.5,0.5,0.5" Padding="1,1,1,1"> <LayoutInput> <AnchorLayoutInput Left="Focus,0,-7" Top="Focus,0,-7" Right="Focus,1,7" Bottom="Focus,1,6" ContributesToWidth="false" ContributesToHeight="false"/> </LayoutInput> <Children> <focus:SelectorFocusLoop/> </Children> </Graphic> <Graphic Name="Shadow" Visible="false" Image="image://ecom:Cell.Focus.Shadow" HorizontalAlignment="Fill" VerticalAlignment="Fill" SizingPolicy="SizeToConstraint" CenterPointPercent="0.5,0.5,0.5"> <LayoutInput> <AnchorLayoutInput Left="Focus,0,-32" Top="Focus,0,-32" Right="Focus,1,28" Bottom="Focus,1,28" ContributesToWidth="false" ContributesToHeight="false"/> </LayoutInput> </Graphic> <Scroller Name="Scroller" FadeSize="40" Orientation="Horizontal" ScrollingData="[ScrollingData]"> <LayoutInput> <FormLayoutInput Left="Parent,0,10" Top="Parent,0,4" Right="Parent,1,-10" Bottom="Parent,1"/> </LayoutInput> <Children> <Repeater Name="Thumbnails" Visible="false" ContentName="Thumbnail" DiscardOffscreenVisuals="true"> <Layout> <FlowLayout Orientation="Horizontal" Spacing="6,0"/> </Layout> </Repeater> </Children> </Scroller> <Panel Name="FillPanel" TouchInteractive="true"> <LayoutInput> <AnchorLayoutInput Left="Parent, 0" Right="Parent, 1" Top="Parent, 0" Bottom="Parent, 1" ContributesToWidth="false" ContributesToHeight="false"/> </LayoutInput> </Panel> </Children> </Graphic> </Content> <Content Name="Thumbnail"> <me:BroadbandThumbnail Model="[RepeatedItem!video:EpgBroadbandThumbnail]" SelectionIndex="[SelectionIndex]" ItemIndex="[RepeatedItemIndex]" FocusArea="[FocusArea]" IsPanning="[IsPanning]"/> </Content> </UI> <UI Name="GuideAutoScrollRegion" BaseUI="ctl:AutoScrollRegion"> <Rules> <Binding Source="[AutoScroll.CanScroll]" Target="[Input.Enabled]"/> </Rules> </UI> <UI Name="BroadbandThumbnail"> <Properties> <video:EpgBroadbandThumbnail Name="Model" video:EpgBroadbandThumbnail="$Required"/> <IntRangedValue Name="SelectionIndex" IntRangedValue="$Required"/> <Index Name="ItemIndex" Index="$Required"/> <EditableText Name="FocusArea" EditableText="$Required"/> <cor:Single Name="FocusAlpha" Single="1.0"/> <cor:Single Name="NoFocusAlpha" Single="0.6"/> <BooleanChoice Name="IsPanning"/> </Properties> <Locals> <ClickHandler Name="Clicker"/> <Command Name="ModelCommand" Command="[Model!video:EpgBroadbandThumbnail]"/> <cor:Boolean Name="IsSelectable" Boolean="false"/> <Timer Name="IsSelectableTimer" Interval="50" AutoRepeat="false" Enabled="false"/> <shell:ContextualUIDescription Name="ContextualUIDescription" Source="@res://Microsoft.MediaCenter.Shell!ContextMenu.mcml#GalleryItem.ContextualView"/> </Locals> <Rules> <Default Target="[Accessible.Name]" Value="[Model.AccessibilityInfo]"/> <Default Target="[Accessible.Role]" Value="Cell"/> <Default Target="[Accessible.DefaultActionCommand]" Value="[ModelCommand]"/> <Binding Target="[Accessible.IsFocused]" Source="[Input.DeepKeyFocus]"/> <Binding Target="[Accessible.IsFocusable]" Source="[Thumb.Visible]"/> <Binding Target="[Accessible.IsSelectable]" Source="[Thumb.Visible]"/> <Changed Source="[Model!video:EpgBroadbandThumbnail.Image]" InitialEvaluate="true"> <Conditions> <IsValid Source="[Model!video:EpgBroadbandThumbnail.Image]"/> </Conditions> <Actions> <Set Value="[Model!video:EpgBroadbandThumbnail.Image]" Target="[Thumb.Image]"/> <Invoke Target="[ContextualUIDescription.SetPropertyValue]" name="Image" value="[Model!video:EpgBroadbandThumbnail.Image]" ExclusiveApply="false" InvokePolicy="Synchronous"/> </Actions> </Changed> <Default Target="[Input.MakeTopmostOnFocus]" Value="true"/> <Default Target="[Input.CreateInterestTarget]" Value="Tile"/> <Condition Source="[Input.KeyFocus]" SourceValue="true" ConditionOp="ChangedTo"> <Actions> <Set Target="[IsSelectable]" Value="false"/> <Invoke Target="[IsSelectableTimer.Start]"/> <PlaySound Sound="res://ehres!Focus_a.wav"/> <Set Target="[SelectionIndex.Value]" Value="[ItemIndex.SourceValue]"/> </Actions> </Condition> <Condition Source="[Input.KeyFocus]" SourceValue="true"> <Conditions> <Equality Source="[IsPanning.Value]" Value="false"/> </Conditions> <Actions> <Set Target="[Thumb.Alpha]" Value="[FocusAlpha]"/> </Actions> </Condition> <Rule> <Conditions> <Modified Source="[IsSelectableTimer.Tick]"/> </Conditions> <Actions> <Set Target="[IsSelectable]" Value="true"/> </Actions> </Rule> <Condition Source="[Input.KeyFocus]" ConditionOp="ChangedTo" SourceValue="false"> <Actions> <Set Target="[IsSelectable]" Value="false"/> </Actions> </Condition> <Rule> <Conditions> <Modified Source="[Clicker.Invoked]"/> <Equality Source="[ModelCommand]" Value="null" ConditionOp="NotEquals"/> <Equality Source="[IsSelectable]" Value="true"/> </Conditions> <Actions> <PlaySound Sound="res://ehres!Select_a.wav"/> <Invoke Target="[ModelCommand.Invoke]" InvokePolicy="AsynchronousLowPri"/> </Actions> </Rule> </Rules> <Content> <Panel Name="Tile" CenterPointPercent="0.5,0.5,0.5"> <Animations> <Animation Animation="animation://anim:TableCellContent.Alpha"/> </Animations> <Children> <Graphic Name="Thumb" Image="res://ehres!Epg.Cell.Broadband.NoArt.png" ErrorImage="res://ehres!Epg.Cell.Broadband.NoArt.png" AcquiringImage="res://ehres!Epg.Cell.Broadband.Loading.png" Alpha="[NoFocusAlpha]" MaximumSize="78,43" MinimumSize="78,43"/> </Children> </Panel> </Content> </UI> </Mcml>